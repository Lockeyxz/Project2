section .data
  counter_fun_file db "counter_fun.txt", 0
  counter_fun     db "1", 0
  counter_fun_len equ $ - counter_fun

section .text
global _start

_start:
  mov ecx, 0
  call count

  mov eax, 1
  int 0x80

count:
  mov ecx, 1
loop:
  cmp ecx, 10000
  jg end_loop

  mov eax, 5
  mov ebx, counter_fun_file
  mov ecx, 0x01
  mov edx, 0777o
  int 0x80

  mov eax, 4
  mov ebx, eax
  mov ecx, counter_fun
  mov edx, counter_fun_len
  int 0x80

  inc ecx
  jmp loop

end_loop:
  ret
